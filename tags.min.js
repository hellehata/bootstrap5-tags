var D={items:[],allowNew:!1,showAllSuggestions:!1,badgeStyle:"primary",allowClear:!1,clearEnd:!1,selected:[],regex:"",separator:[],max:0,clearLabel:"Clear",searchLabel:"Type a value",showDropIcon:!0,keepOpen:!1,allowSame:!1,baseClass:"",placeholder:"",addOnBlur:!1,showDisabled:!1,hideNativeValidation:!1,suggestionsThreshold:-1,maximumItems:0,autoselectFirst:!0,updateOnSelect:!1,highlightTyped:!1,fullWidth:!0,fixed:!1,fuzzy:!1,startsWith:!1,singleBadge:!1,activeClasses:["bg-primary","text-white"],labelField:"label",valueField:"value",searchFields:["label"],queryParam:"query",server:"",serverMethod:"GET",serverParams:{},serverDataKey:"data",fetchOptions:{},liveServer:!1,noCache:!0,debounceTime:300,notFoundMessage:"",onRenderItem:(o,t,e)=>t,onSelectItem:(o,t)=>{},onClearItem:(o,t)=>{},onCreateItem:(o,t)=>{},onBlur:(o,t)=>{},onFocus:(o,t)=>{},onCanAdd:(o,t,e)=>{},confirmClear:(o,t)=>Promise.resolve(),confirmAdd:(o,t)=>Promise.resolve(),onServerResponse:(o,t)=>o.json()},v="tags-",M="is-loading",N="is-active",g="is-invalid",H="is-max-reached",x="show",b="data-value",C="next",O="prev",R="form-control-focus",q="form-placeholder-shown",P="form-control-disabled",E=new WeakMap,j=0,T=window.bootstrap&&window.bootstrap.Tooltip;function V(o,t=300){let e;return(...s)=>{clearTimeout(e),e=setTimeout(()=>{o.apply(this,s)},t)}}function W(o,t=null){let e=p("span");document.body.appendChild(e),e.style.fontSize=t||"inherit",e.style.height="auto",e.style.width="auto",e.style.position="absolute",e.style.whiteSpace="no-wrap",e.innerHTML=o;let s=Math.ceil(e.clientWidth);return document.body.removeChild(e),s}function _(o){return o.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}function F(o){return o?_(o.toString()).toLowerCase():""}function U(o,t){if(o.indexOf(t)>=0)return!0;let e=0;for(let s=0;s<t.length;s++){let i=t[s];if(i!=" "&&(e=o.indexOf(i,e)+1,e<=0))return!1}return!0}function I(o){o.style.display="none",L(o,{"aria-hidden":"true"})}function z(o){o.style.display="list-item",L(o,{"aria-hidden":"false"})}function L(o,t){for(let[e,s]of Object.entries(t))o.setAttribute(e,s)}function S(o,t){o.hasAttribute(t)&&o.removeAttribute(t)}function B(o){return["true","false","1","0",!0,!1].includes(o)&&!!JSON.parse(o)}function p(o){return document.createElement(o)}var y=class{constructor(t,e={}){if(!(t instanceof HTMLElement)){console.error("Invalid element",t);return}E.set(t,this),j++,this.i=t,this.T(e),this.h=!1,this.F=V(()=>{this.S(!0)},this.e.debounceTime),this.d=!0,this.k(),this.n=p("div"),this.r=p("div"),this.l=p("ul"),this.s=p("input"),this.n.appendChild(this.r),this.i.parentElement.insertBefore(this.n,this.i),this.D(),this.M(),this.N(),this.H(),this.R(),this.resetState(),this.handleEvent=s=>{this.w(s)},this.e.fixed&&(document.addEventListener("scroll",this,!0),window.addEventListener("resize",this)),this.s.addEventListener("focus",this),this.s.addEventListener("blur",this),this.s.addEventListener("input",this),this.s.addEventListener("keydown",this),this.l.addEventListener("mousemove",this),this.loadData(!0)}static init(t="select[multiple]",e={}){let s=document.querySelectorAll(t);for(let i=0;i<s.length;i++)y.getInstance(s[i])||new y(s[i],e)}static getInstance(t){if(E.has(t))return E.get(t)}dispose(){this.s.removeEventListener("focus",this),this.s.removeEventListener("blur",this),this.s.removeEventListener("input",this),this.s.removeEventListener("keydown",this),this.l.removeEventListener("mousemove",this),this.e.fixed&&(document.removeEventListener("scroll",this,!0),window.removeEventListener("resize",this)),this.i.style.display="block",this.n.parentElement.removeChild(this.n),this.parentForm&&this.parentForm.removeEventListener("reset",this),E.delete(this.i)}handleEvent(t){this.w(t)}w(t){["scroll","resize"].includes(t.type)?(this.A&&window.cancelAnimationFrame(this.A),this.A=window.requestAnimationFrame(()=>{this[`on${t.type}`](t)})):this[`on${t.type}`](t)}T(t={}){this.e=Object.assign({},D,{showDropIcon:!!this.u()});let e=this.i.dataset.config?JSON.parse(this.i.dataset.config):{},s={...t,...e,...this.i.dataset};for(let[i,r]of Object.entries(D)){if(i=="config"||s[i]===void 0)continue;let n=s[i];switch(typeof r){case"number":this.e[i]=parseInt(n);break;case"boolean":this.e[i]=B(n);break;case"string":this.e[i]=n.toString();break;case"object":this.e[i]=n,typeof n=="string"&&(["{","["].includes(n[0])?this.e[i]=JSON.parse(n):this.e[i]=n.split(n.includes("|")?"|":","));break;case"function":this.e[i]=typeof n=="string"?n.split(".").reduce((l,a)=>l[a],window):n,this.e[i]||console.error("Invalid function",n);break;default:this.e[i]=n;break}}this.e.placeholder||(this.e.placeholder=this.q()),this.e.suggestionsThreshold==-1&&(this.e.suggestionsThreshold=this.e.liveServer?1:0)}config(t=null){return t?this.e[t]:this.e}setConfig(t,e){this.e[t]=e}k(){for(this.overflowParent=null,this.parentForm=this.i.parentElement;this.parentForm&&(this.parentForm.style.overflow==="hidden"&&(this.overflowParent=this.parentForm),this.parentForm=this.parentForm.parentElement,!(this.parentForm&&this.parentForm.nodeName=="FORM")););this.parentForm&&this.parentForm.addEventListener("reset",this)}q(){if(this.i.hasAttribute("placeholder"))return this.i.getAttribute("placeholder");if(this.i.dataset.placeholder)return this.i.dataset.placeholder;let t=this.i.querySelector("option");return!t||!this.e.autoselectFirst?"":(S(t,"selected"),t.selected=!1,t.value?"":t.textContent)}N(){let t=this.i;this.e.hideNativeValidation?(t.style.position="absolute",t.style.left="-9999px"):t.style.cssText="height:1px;width:1px;opacity:0;padding:0;margin:0;border:0;float:left;flex-basis:100%;",t.tabIndex=-1,t.addEventListener("focus",e=>{this.onclick(e)}),t.addEventListener("invalid",e=>{this.n.classList.add(g)})}R(){let t=this.l;t.classList.add("dropdown-menu",v+"menu"),t.id=v+"menu-"+j,t.setAttribute("role","menu");let e=t.style;e.padding="0",e.maxHeight="280px",this.e.fullWidth||(e.maxWidth="360px"),this.e.fixed&&(e.position="fixed"),e.overflowY="auto",e.overscrollBehavior="contain",e.textAlign="unset",t.addEventListener("mouseenter",s=>{this.h=!1}),this.n.appendChild(t),this.s.setAttribute("aria-controls",t.id)}D(){let t=this.n;t.classList.add("form-control","dropdown"),["form-select-lg","form-select-sm"].forEach(e=>{this.i.classList.contains(e)&&t.classList.add(e)}),this.e.suggestionsThreshold==0&&this.e.showDropIcon&&t.classList.add("form-select"),this.overflowParent&&(t.style.position="inherit"),t.style.height="auto",t.addEventListener("click",this)}M(){this.r.addEventListener("click",e=>{this.isDisabled()||this.s.style.visibility!="hidden"&&this.s.focus()});let t=this.r.style;t.display="flex",t.alignItems="center",t.flexWrap="wrap"}H(){let t=this.s;t.type="text",t.autocomplete="field-"+Date.now(),t.spellcheck=!1,L(t,{"aria-autocomplete":"list","aria-haspopup":"menu","aria-expanded":"false","aria-label":this.e.searchLabel,role:"combobox"}),t.style.cssText="background-color:transparent;color:currentColor;border:0;padding:0;outline:0;max-width:100%",this.resetSearchInput(!0),this.r.appendChild(t),this.P=window.getComputedStyle(t).direction==="rtl"}onfocus(t){this.n.classList.add(R),this.showOrSearch(),this.e.onFocus(t,this)}onblur(t){this.o&&this.o.abort();let e=!0;if(this.e.addOnBlur&&this.s.value&&(e=this.L()),this.n.classList.remove(R),this.hideSuggestions(e),this.d){let s=this.getSelection(),i={selection:s?s.dataset.value:null,input:this.s.value};this.e.onBlur(t,this),this.i.dispatchEvent(new CustomEvent("tags.blur",{bubbles:!0,detail:i}))}}oninput(t){let e=this.s.value;if(e){let s=e.slice(-1);if(this.e.separator.length&&this.e.separator.includes(s)){this.s.value=this.s.value.slice(0,-1);let i=this.s.value,r=i,n={};if(this.e.allowNew)n.new=1;else{let l=this.getSelection();if(!l)return;i=l.getAttribute(b),r=l.dataset.label}this.e.confirmAdd(i,this).then(()=>{this.p(r,i,n)}).catch(()=>{});return}}setTimeout(()=>{this.a()}),this.showOrSearch()}onkeydown(t){let e=t.keyCode||t.key,s=t.target;switch(t.keyCode==229&&(e=s.value.charAt(s.selectionStart-1).charCodeAt(0)),e){case 13:case"Enter":t.preventDefault(),this.L();break;case 38:case"ArrowUp":t.preventDefault(),this.h=!0,this.m(O);break;case 40:case"ArrowDown":t.preventDefault(),this.h=!0,this.isDropdownVisible()?this.m(C):this.showOrSearch(!1);break;case 8:case"Backspace":let i=this.getLastItem();this.s.value.length==0&&i&&this.e.confirmClear(i,this).then(()=>{this.removeLastItem(),this.a(),this.showOrSearch()}).catch(()=>{});break;case 27:case"Escape":this.s.focus(),this.hideSuggestions();break}}onmousemove(t){this.h=!1}onscroll(t){this.g()}onresize(t){this.g()}onclick(t=null){t&&t.preventDefault(),!(!this.isSingle()&&this.isMaxReached())&&this.s.focus()}onreset(t){this.reset()}loadData(t=!1){Object.keys(this.e.items).length>0?this.setData(this.e.items,!0):this.resetSuggestions(!0),this.e.server&&(this.e.liveServer||this.S(!t))}j(){let t=this.i.selectedOptions||[];for(let e=0;e<t.length;e++)t[e].value&&!t[e].hasAttribute("selected")&&t[e].setAttribute("selected","selected")}resetState(){this.isDisabled()?(this.n.setAttribute("readonly",""),this.s.setAttribute("disabled",""),this.n.classList.add(P)):(S(this.n,"readonly"),S(this.s,"disabled"),this.n.classList.remove(P))}resetSuggestions(t=!1){this.j();let e=Array.from(this.i.children).filter(s=>s.hasAttribute("label")||!s.disabled||this.e.showDisabled).map(s=>s.hasAttribute("label")?{group:s.getAttribute("label"),items:s.children}:{value:s.getAttribute("value"),label:s.textContent,disabled:s.disabled,selected:s.selected,data:Object.assign({disabled:s.disabled},s.dataset)});this.setData(e,t)}L(){let t=this.getSelection();if(t)return t.click(),!0;if(this.e.allowNew&&this.s.value){let e=this.s.value;return this.e.confirmAdd(e,this).then(()=>{this.p(e,e,{new:1})}).catch(()=>{}),!0}return!1}S(t=!1){this.o&&this.o.abort(),this.o=new AbortController;let e=this.i.dataset.serverParams||{};typeof e=="string"&&(e=JSON.parse(e));let s=Object.assign({},this.e.serverParams,e);if(s[this.e.queryParam]=this.s.value,this.e.noCache&&(s.t=Date.now()),s.related){let l=document.getElementById(s.related);if(l){s.related=l.value;let a=l.getAttribute("name");a&&(s[a]=l.value)}}let i=new URLSearchParams(s),r=this.e.server,n=Object.assign(this.e.fetchOptions,{method:this.e.serverMethod||"GET",signal:this.o.signal});n.method==="POST"?n.body=i:r+="?"+i.toString(),this.n.classList.add(M),fetch(r,n).then(l=>this.e.onServerResponse(l,this)).then(l=>{let a=l[this.e.serverDataKey]||l;this.setData(a,!t),this.o=null,t&&this.b()}).catch(l=>{l.name!=="AbortError"&&console.error(l)}).finally(l=>{this.n.classList.remove(M)})}p(t,e=null,s={}){if(!this.canAdd(t,s))return null;let i=this.addItem(t,e,s);return this.v(),this.e.keepOpen?this.b():this.resetSearchInput(),i}f(t){if(t.style.display==="none")return!1;let e=t.firstElementChild;return e.tagName==="A"&&!e.classList.contains("disabled")}m(t=C,e=null){let s=this.getSelection();if(s){let i=t===C?"nextSibling":"previousSibling";e=s.parentNode;do e=e[i];while(e&&!this.f(e));e?s.classList.remove(...this.c()):s&&(e=s.parentElement)}else{if(t===O)return e;if(!e)for(e=this.l.firstChild;e&&!this.f(e);)e=e.nextSibling}if(e){let i=e.offsetHeight,r=e.offsetTop,n=e.parentNode,l=n.offsetHeight,a=n.scrollHeight,h=n.offsetTop;if(i===0&&setTimeout(()=>{n.scrollTop=0}),t===O){let u=r-h>10?r-h:0;n.scrollTop=u}else r+i-(l+n.scrollTop)>0&&i>0&&(n.scrollTop=r+i-l+1,n.scrollTop+l>=a-10&&(n.scrollTop=r-h));let d=e.querySelector("a");d.classList.add(...this.c()),this.s.setAttribute("aria-activedescendant",d.id),this.e.updateOnSelect&&(this.s.value=d.dataset.label,this.a())}else this.s.setAttribute("aria-activedescendant","");return e}a(){this.n.classList.remove(q),this.s.value?this.s.size=this.s.value.length:this.getSelectedValues().length?(this.s.placeholder="",this.s.size=1):(this.s.size=this.e.placeholder.length>0?this.e.placeholder.length:1,this.s.placeholder=this.e.placeholder,this.n.classList.add(q));let t=this.s.value||this.s.placeholder,e=window.getComputedStyle(this.n).fontSize,s=W(t,e)+16;this.s.style.width=s+"px"}z(t){for(;this.l.lastChild;)this.l.removeChild(this.l.lastChild);let e=0,s=1;for(let i=0;i<t.length;i++){let r=t[i];if(r){if(r.group&&r.items){let n=p("li");n.setAttribute("role","presentation"),n.dataset.id=""+s;let l=p("span");if(n.append(l),l.classList.add("dropdown-header","text-truncate"),l.innerHTML=r.group,this.l.appendChild(n),r.items)for(let a=0;a<r.items.length;a++){let h=r.items[a];h.group_id=s,this.C(r.items[a],e),e++}s++}this.C(r,e),e++}}if(this.e.notFoundMessage){let i=p("li");i.setAttribute("role","presentation"),i.classList.add(v+"not-found"),i.innerHTML='<span class="dropdown-item"></span>',this.l.appendChild(i)}}C(t,e){if(!t[this.e.valueField])return;let s=t[this.e.valueField],i=t[this.e.labelField],r=this.e.onRenderItem(t,i,this),n=p("li");n.setAttribute("role","presentation"),t.group_id&&n.setAttribute("data-group-id",""+t.group_id);let l=p("a");n.append(l),l.id=this.l.id+"-"+e,l.classList.add("dropdown-item","text-truncate"),t.disabled&&l.classList.add("disabled"),l.setAttribute(b,s),l.dataset.label=i,this.e.searchFields.forEach(a=>{n.dataset[a]=t[a]}),l.setAttribute("href","#"),l.innerHTML=r,this.l.appendChild(n),l.addEventListener("mouseenter",a=>{this.h||(this.removeSelection(),n.querySelector("a").classList.add(...this.c()))}),l.addEventListener("mousedown",a=>{a.preventDefault()}),l.addEventListener("click",a=>{a.preventDefault(),a.stopPropagation(),this.e.confirmAdd(s,this).then(()=>{this.p(i,s,t.data),this.e.onSelectItem(t,this)}).catch(()=>{})})}initialOptions(){return this.i.querySelectorAll("option[data-init]")}E(){this.i.querySelectorAll("option").forEach(t=>{S(t,"selected")})}reset(){this.removeAll(),this.d=!1;let t=this.initialOptions();this.E();for(let e=0;e<t.length;e++){let s=t[e],i=Object.assign({},{disabled:s.hasAttribute("disabled")},s.dataset);this.addItem(s.textContent,s.value,i)}this.v(),this.d=!0}resetSearchInput(t=!1){this.s.value="",this.a(),t||(this.I()||this.hideSuggestions(),this.s===document.activeElement&&this.s.dispatchEvent(new Event("input"))),this.isMaxReached()?(this.n.classList.add(H),this.s.style.visibility="hidden"):this.s.style.visibility=="hidden"&&(this.s.style.visibility="visible"),this.isSingle()&&!t&&document.activeElement.blur()}getSelectedValues(){let t=this.i.querySelectorAll("option[selected]");return Array.from(t).map(e=>e.value)}getAvailableValues(){let t=this.i.querySelectorAll("option");return Array.from(t).map(e=>e.value)}showOrSearch(t=!0){if(t&&!this.I()){this.hideSuggestions(!1);return}this.e.liveServer?this.F():this.b()}hideSuggestions(t=!0){this.l.classList.remove(x),L(this.s,{"aria-expanded":"false"}),this.removeSelection(),t&&this.n.classList.remove(g)}toggleSuggestions(t=!0,e=!0){this.l.classList.contains(x)?this.hideSuggestions(e):this.showOrSearch(t)}I(){return this.isDisabled()||this.isMaxReached()?!1:this.s.value.length>=this.e.suggestionsThreshold}b(){if(document.activeElement!=this.s||this.s.style.visibility=="hidden")return;let t=F(this.s.value),e={},s=this.l.querySelectorAll("li"),i=0,r=null,n=!1,l={};for(let a=0;a<s.length;a++){let h=s[a],d=h.firstElementChild;if(d instanceof HTMLSpanElement){h.dataset.id&&(l[h.dataset.id]=!1),I(h);continue}if(d.classList.remove(...this.c()),!this.e.allowSame){let c=d.getAttribute(b);if(e[c]=e[c]||0,this.u(d.getAttribute(b),"[selected]",e[c]++)){I(h);continue}}let u=this.e.showAllSuggestions||t.length===0,f=t.length==0&&this.e.suggestionsThreshold===0;!u&&t.length>0&&this.e.searchFields.forEach(c=>{let m=F(d.dataset[c]),A=!1;if(this.e.fuzzy)A=U(m,t);else{let k=m.indexOf(t);A=this.e.startsWith?k===0:k>=0}A&&(f=!0)});let w=f||t.length===0;if(u||f?(i++,z(h),h.dataset.groupId&&(l[h.dataset.groupId]=!0),!r&&this.f(h)&&w&&(r=h),this.e.maximumItems>0&&i>this.e.maximumItems&&I(h)):I(h),this.e.highlightTyped){let c=d.textContent,m=F(c).indexOf(t),A=c.substring(0,m)+`<mark>${c.substring(m,m+t.length)}</mark>`+c.substring(m+t.length,c.length);d.innerHTML=A}this.f(h)&&(n=!0)}if(!this.e.allowNew&&!(t.length===0&&!n)&&this.n.classList.add(g),this.e.allowNew&&this.e.regex&&this.isInvalid()&&this.n.classList.remove(g),Array.from(s).filter(a=>a.dataset.id).forEach(a=>{l[a.dataset.id]===!0&&z(a)}),n&&(this.n.classList.remove(g),r&&this.e.autoselectFirst&&(this.removeSelection(),this.m(C,r))),i===0)if(this.e.notFoundMessage){let a=this.l.querySelector("."+v+"not-found");a.style.display="block";let h=this.e.notFoundMessage.replace("{{tag}}",this.s.value);a.innerHTML=`<span class="dropdown-item">${h}</span>`,this.O()}else this.hideSuggestions(!1);else this.O()}O(){this.l.classList.add(x),L(this.s,{"aria-expanded":"true"}),this.g()}g(){let t=this.P,e=this.e.fixed,s=this.e.fullWidth,i=this.s.getBoundingClientRect(),r=this.n.getBoundingClientRect(),n=0,l=0;if(e?s?(n=r.x,l=r.y+r.height+2):(n=i.x,l=i.y+i.height):s?(n=0,l=r.height+2):(n=this.s.offsetLeft,l=this.s.offsetHeight+6),t&&!s&&(n-=this.l.offsetWidth-i.width),!s){let d=Math.min(window.innerWidth,document.body.offsetWidth),u=t?i.x+i.width-this.l.offsetWidth-1:d-1-(i.x+this.l.offsetWidth);u<0&&(n=t?n-u:n+u)}s&&(this.l.style.width=this.n.offsetWidth+"px"),Object.assign(this.l.style,{transform:"unset",left:n+"px",top:l+"px"});let a=this.l.getBoundingClientRect(),h=window.innerHeight;if(a.y+a.height>h){let d=s?r.height+4:i.height;this.l.style.transform="translateY(calc(-100.1% - "+d+"px))"}}B(){let t=5,e=window.jQuery;return e&&e.fn.tooltip&&e.fn.tooltip.Constructor&&(t=parseInt(e.fn.tooltip.Constructor.VERSION.charAt(0))),t}V(t){return!!Array.from(this.i.querySelectorAll("option")).find(i=>i.textContent==t&&i.getAttribute("selected"))}W(t){let s=Array.from(this.i.querySelectorAll("option")).filter(i=>i.textContent==t);return!(s.length>0&&!s.find(r=>!r.getAttribute("selected")))}_(t){return!!this.e.items.find(s=>s[this.e.labelField]==t)}U(t){return new RegExp(this.e.regex.trim()).test(t)}getSelection(){return this.l.querySelector("a."+N)}removeSelection(){let t=this.getSelection();t&&t.classList.remove(...this.c())}c(){return[...this.e.activeClasses,N]}getActiveSelection(){return this.getSelection()}removeActiveSelection(){return this.removeSelection()}removeAll(){this.getSelectedValues().forEach(e=>{this.removeItem(e,!0)}),this.a()}removeLastItem(t=!1){let e=this.getLastItem();e&&this.removeItem(e,t)}getLastItem(){let t=this.r.querySelectorAll("span."+v+"badge");return t.length?t[t.length-1].getAttribute(b):void 0}enable(){this.i.setAttribute("disabled",""),this.resetState()}disable(){S(this.i,"disabled"),this.resetState()}isDisabled(){return this.i.hasAttribute("disabled")||this.i.disabled||this.i.hasAttribute("readonly")}isDropdownVisible(){return this.l.classList.contains(x)}isInvalid(){return this.n.classList.contains(g)}isSingle(){return!this.i.hasAttribute("multiple")}isMaxReached(){return this.e.max&&this.getSelectedValues().length>=this.e.max}canAdd(t,e={}){if(!t||e.new&&!this.e.allowNew||!e.new&&!this._(t)||this.isDisabled())return!1;if(!this.isSingle()&&!this.e.allowSame){if(e.new){if(this.V(t))return!1}else if(!this.W(t))return!1}return this.isMaxReached()?!1:this.e.regex&&e.new&&!this.U(t)?(this.n.classList.add(g),!1):this.e.onCanAdd&&this.e.onCanAdd(t,e,this)===!1?(this.n.classList.add(g),!1):!0}setData(t,e=!1){Array.isArray(t)||(t=Object.entries(t).map(([s,i])=>({value:s,label:i}))),this.e.items!=t&&(this.e.items=t),e&&(this.E(),t.forEach(s=>{let i=s[this.e.valueField],r=s[this.e.labelField];if(i&&(s.selected||this.e.selected.includes(i))){let n=this.addItem(r,i,s.data);n&&n.setAttribute("data-init","true")}})),this.z(t),this.v()}u(t=null,e="",s=0){let r="option"+(t===null?"":'[value="'+CSS.escape(t)+'"]')+e;return this.i.querySelectorAll(r)[s]||null}addItem(t,e=null,s={}){e||(e=t),this.isSingle()&&this.getSelectedValues().length&&this.removeLastItem(!0);let i=this.u(e,":not([selected])");if(!i){i=p("option"),i.value=e,i.textContent=t;for(let[r,n]of Object.entries(s))i.dataset[r]=n;this.i.appendChild(i),this.e.onCreateItem(i,this)}return i&&(s=Object.assign({title:i.getAttribute("title")},s,i.dataset)),i.setAttribute("selected","selected"),i.selected=!0,this.G(t,e,s),this.d&&this.i.dispatchEvent(new Event("change",{bubbles:!0})),i}v(){let t=this.i.innerHTML;this.i.innerHTML="",this.i.innerHTML=t,this.a()}G(t,e=null,s={}){let i=this.B()===5,r=s.disabled&&B(s.disabled),n=this.e.allowClear&&!r,l=t,a=p("span"),h=[v+"badge"],d=this.isSingle()&&!this.e.singleBadge;if(!d){h.push("badge");let f=this.e.badgeStyle;s.badgeStyle&&(f=s.badgeStyle),s.badgeClass&&h.push(...s.badgeClass.split(" ")),this.e.baseClass?h.push(...this.e.baseClass.split(" ")):i?h=[...h,"bg-"+f,"text-truncate"]:h=[...h,"badge-"+f],a.style.maxWidth="100%"}r&&h.push("disabled","opacity-50");let u=d?0:2;if(a.style.margin=u+"px 6px "+u+"px 0px",a.style.marginBlock=u+"px",a.style.marginInline="0px 6px",a.classList.add(...h),a.setAttribute(b,e),s.title&&a.setAttribute("title",s.title),n){let f=h.includes("text-dark")||d?"btn-close":"btn-close btn-close-white",w="margin-inline: 0px 6px;",c="left";this.e.clearEnd&&(c="right"),c=="right"&&(w="margin-inline: 6px 0px;");let m=i?'<button type="button" style="font-size:0.65em;'+w+'" class="'+f+'" aria-label="'+this.e.clearLabel+'"></button>':'<button type="button" style="font-size:1em;'+w+'text-shadow:none;color:currentColor;transform:scale(1.2);float:none" class="close" aria-label="'+this.e.clearLabel+'"><span aria-hidden="true">&times;</span></button>';l=c=="left"?m+l:l+m}a.innerHTML=l,this.r.insertBefore(a,this.s),s.title&&T&&i&&T.getOrCreateInstance(a),n&&a.querySelector("button").addEventListener("click",f=>{f.preventDefault(),f.stopPropagation(),this.isDisabled()||this.e.confirmClear(e,this).then(()=>{this.removeItem(e),document.activeElement.blur(),this.a()}).catch(()=>{})})}removeItem(t,e=!1){let s=CSS.escape(t),i=this.r.querySelectorAll("span["+b+'="'+s+'"]');if(!i.length)return;let r=i.length-1,n=i[r];n&&(n.dataset.bsOriginalTitle&&T.getOrCreateInstance(n).dispose(),n.remove());let l=this.u(t,"[selected]",r);l&&(S(l,"selected"),l.selected=!1,this.d&&!e&&this.i.dispatchEvent(new Event("change",{bubbles:!0}))),this.s.style.visibility=="hidden"&&!this.isMaxReached()&&(this.s.style.visibility="visible",this.n.classList.remove(H)),e||this.e.onClearItem(t,this)}},G=y;export{G as default};
//# sourceMappingURL=tags.min.js.map
